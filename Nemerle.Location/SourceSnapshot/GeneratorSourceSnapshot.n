using System.Text;
using Nemerle;
using Nemerle.Collections;
using Nemerle.Text;
using Nemerle.Utility;

using System;
using System.Collections.Generic;
using System.Linq;

namespace Nemerle.Compiler
{
  [Record]
  public sealed class GeneratorSourceSnapshot : SourceSnapshot
  {
    private _builder : StringBuilder = StringBuilder();

    public this(builder : StringBuilder, file : File)
    {
      base(textOffset=0, hashCode=0);
      _builder = builder;
      File     = file;
    }
    
    public override File : Nemerle.Compiler.File { get; }
    public override IsGenerated : bool { get true }
    public override IsSourceAvailable : bool { get true }
    public override OriginalText : string { get Text }
    public override Text : string { get _builder.ToString() }
    public override Version : int { get 1 }
    public override IsFake : bool { get false }
    
    public override GetHashCode() : int { _builder.GetHashCode() ^ File.GetHashCode() }
  }
}
